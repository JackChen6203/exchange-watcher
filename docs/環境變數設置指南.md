# 環境變數設置指南

## 為什麼專案中沒有 .env 文件？

這是**正確的安全做法**！`.env` 文件包含敏感信息（API密鑰、webhook網址等），不應該提交到版本控制中。

## 在 GCP VM 上設置 .env 文件

### 1. SSH 連接到您的 GCP VM
```bash
ssh -i ~/.ssh/your-key JackChen6203@35.212.185.14
```

### 2. 進入專案目錄
```bash
cd /home/JackChen6203/crypto-exchange-monitor
```

### 3. 複製模板文件並編輯
```bash
# 複製模板文件
cp .env.template .env

# 使用編輯器編輯（選擇其中一種）
nano .env
# 或
vim .env
# 或
code .env  # 如果安裝了 VS Code
```

### 4. 填入實際配置值

編輯 `.env` 文件，填入您的實際配置：

```bash
# ==============================================
# Crypto Exchange Monitor - 環境變數配置
# ==============================================

# 交易所 API 配置 (必須設定)
API_KEY=您的實際API密鑰
API_SECRET=您的實際API密鑰
API_PASSPHRASE=您的實際API通行密語

# Discord Webhook 配置 (必須設定)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/實際的webhook網址

# 其他配置可以保持預設值或根據需要調整...
```

### 5. 確保文件權限安全
```bash
# 設置 .env 文件權限，只有所有者可以讀寫
chmod 600 .env

# 確認權限設置
ls -la .env
# 應該顯示：-rw------- 1 JackChen6203 JackChen6203 ... .env
```

### 6. 驗證配置
```bash
# 檢查文件內容（注意：這會顯示敏感信息）
cat .env

# 或者只檢查文件是否存在
ls -la .env
```

## 獲取所需的配置值

### Bitget API 配置
1. 登入 [Bitget](https://www.bitget.com)
2. 前往 API 管理
3. 創建新的 API 密鑰
4. 獲取：API Key、Secret Key、Passphrase

### Discord Webhook 配置
1. 前往您的 Discord 伺服器
2. 進入頻道設置 → 整合 → Webhooks
3. 創建新的 Webhook
4. 複製 Webhook URL

## 部署後驗證

設置完 `.env` 文件後：

```bash
# 重啟服務以載入新配置
sudo systemctl restart crypto-monitor

# 檢查服務狀態
sudo systemctl status crypto-monitor

# 查看日誌確認配置是否正確
sudo journalctl -u crypto-monitor --lines=20 -f
```

## 安全注意事項

1. **絕對不要**將 `.env` 文件提交到 Git
2. **定期更換** API 密鑰
3. **限制 API 權限**，只給予必要的權限
4. **保護文件權限**，確保只有應用程式可以讀取
5. **備份配置**，但要安全存儲

## 故障排除

如果服務啟動失敗，可能是因為：
1. `.env` 文件不存在
2. API 配置錯誤
3. Discord Webhook URL 無效
4. 文件權限問題

檢查日誌：
```bash
sudo journalctl -u crypto-monitor --lines=50
```
